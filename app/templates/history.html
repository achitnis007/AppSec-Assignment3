{% extends "layout.html" %}
{% block content %}
	<!-- div class="content-section" -->
    <div class="container-section-query-list">
		<!-- form id='userquery' method="POST" action="" -->
        <form method="POST" action="">
			{{ form.hidden_tag() }}
			<fieldset class="form-group">
				<legend class="border-bottom mb-4">Spell Checker Query History</legend>
                <p id="numqueries">Query Count: {{ service_records_cnt }}</p>
                    <div class="form-group">
                        {% if (service_records_cnt > 0) %}
                          <ul style="list-style-type:none;">
                          <li>Query ID&nbsp&nbsp&nbsp&nbsp&nbspUser Name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspQuery Text</li>
                          {% for sr in service_records %}
                            <li id="query{{ sr.id }}">
                              {{ sr.id }}
                              &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                              <a href="{{ url_for('historyfor', user_clicked=sr.username) }}">{{ sr.username }}</a>
                              &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                              <a href="{{ url_for('reviewquery', querynum='query' + sr.id|string) }}">{{ sr.input_content }}</a>
                            </li>
                          {% endfor %}
                          </ul>
                    </div>
                {% endif %}
                {%  if current_user.username == 'admin' %}
                    <div class="form-group">
                        {{ form.username.label(class="form-control-label") }}
                        {% if form.username.errors %}
                            {{ form.username(class="form-control form-control-lg is-invalid") }}
                            <div class="invalid-feedback">
                                {% for error in form.username.errors %}
                                    <span>{{ error }}</span>
                                {% endfor %}
                            </div>
                        {% else %}
                            {{ form.username(class="form-control form-control-lg") }}
                        {% endif %}
                    </div>
                    <div class="form-group">
                        {{ form.submit(class="btn btn-outline-info") }}
                    </div>
                {% endif %}
            </fieldset>
		</form>
    </div>
{% endblock content %}
